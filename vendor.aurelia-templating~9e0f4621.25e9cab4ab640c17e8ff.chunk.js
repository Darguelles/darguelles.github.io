(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{hij8:function(e,t,i){"use strict";(function(e){i.d(t,"a",function(){return T}),i.d(t,"h",function(){return P}),i.d(t,"b",function(){return $}),i.d(t,"l",function(){return X}),i.d(t,"p",function(){return oe}),i.d(t,"e",function(){return ae}),i.d(t,"j",function(){return de}),i.d(t,"q",function(){return ve}),i.d(t,"n",function(){return me}),i.d(t,"r",function(){return ge}),i.d(t,"f",function(){return Ne}),i.d(t,"o",function(){return De}),i.d(t,"c",function(){return ze}),i.d(t,"d",function(){return Ue}),i.d(t,"i",function(){return Qe}),i.d(t,"t",function(){return Ge}),i.d(t,"k",function(){return it}),i.d(t,"g",function(){return rt}),i.d(t,"y",function(){return ot}),i.d(t,"v",function(){return st}),i.d(t,"u",function(){return at}),i.d(t,"z",function(){return lt}),i.d(t,"s",function(){return ut}),i.d(t,"A",function(){return ht}),i.d(t,"B",function(){return pt}),i.d(t,"w",function(){return ft}),i.d(t,"x",function(){return vt}),i.d(t,"m",function(){return mt});var n,r,o,s,a,l,u,c,h,d,p,f,v,m,g,w,b,y,C,S,V,A,_=i("MP1E"),N=i("qrcG"),M=i("70NS"),O=i("ZdUM"),j=i("iD3O"),I=i("X5gX"),x=i("3U8n"),k=i("K/SW"),B=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T=function(){function t(){}return t.prototype.enter=function(t){return e.resolve(!1)},t.prototype.leave=function(t){return e.resolve(!1)},t.prototype.removeClass=function(t,i){return t.classList.remove(i),e.resolve(!1)},t.prototype.addClass=function(t,i){return t.classList.add(i),e.resolve(!1)},t.prototype.animate=function(t,i){return e.resolve(!1)},t.prototype.runSequence=function(e){},t.prototype.registerEffect=function(e,t){},t.prototype.unregisterEffect=function(e){},t}(),E=function(){function e(e){this.owner=e,this.owner._compositionCount++}return e.prototype.done=function(){this.owner._compositionCount--,this.owner._tryCompleteTransaction()},e}(),R=function(){function t(e){this.owner=e,this.owner._ownershipToken=this,this.thenable=this._createThenable()}return t.prototype.waitForCompositionComplete=function(){return this.owner._tryCompleteTransaction(),this.thenable},t.prototype.resolve=function(){this._resolveCallback()},t.prototype._createThenable=function(){var t=this;return new e(function(e,i){t._resolveCallback=e})},t}(),P=function(){function e(){this._ownershipToken=null,this._compositionCount=0}return e.prototype.tryCapture=function(){return null===this._ownershipToken?new R(this):null},e.prototype.enlist=function(){return new E(this)},e.prototype._tryCompleteTransaction=function(){if(this._compositionCount<=0&&(this._compositionCount=0,null!==this._ownershipToken)){var e=this._ownershipToken;this._ownershipToken=null,e.resolve()}},e}(),D=/([A-Z])/g;function L(e){return"-"+e.toLowerCase()}function z(e){return(e.charAt(0).toLowerCase()+e.slice(1)).replace(D,L)}function H(e){return!(e.auInterpolationTarget||/[^\t\n\r ]/.test(e.textContent))}var U=function(){function e(){}return e.prototype.initialize=function(e,t){this.instance=e.get(t)},e.prototype.register=function(e,t){e.registerViewEngineHooks(this.instance)},e.prototype.load=function(e,t){},e.convention=function(t){if(t.endsWith("ViewEngineHooks"))return new e},e}();var q=(r=n=function(){function e(e){this.element=e,this.subscriptions={}}return e.prototype._enqueueHandler=function(e){this.subscriptions[e.eventName]=this.subscriptions[e.eventName]||[],this.subscriptions[e.eventName].push(e)},e.prototype._dequeueHandler=function(e){var t=void 0,i=this.subscriptions[e.eventName];return i&&(t=i.indexOf(e))>-1&&i.splice(t,1),e},e.prototype.publish=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=M.b.createCustomEvent(e,{cancelable:n,bubbles:i,detail:t});this.element.dispatchEvent(r)},e.prototype.subscribe=function(t,i,n){if("function"==typeof i)return void 0===n&&(n=e.defaultListenerOptions),new W(this,t,i,n,!1)},e.prototype.subscribeOnce=function(t,i,n){if("function"==typeof i)return void 0===n&&(n=e.defaultListenerOptions),new W(this,t,i,n,!0)},e.prototype.dispose=function(e){if(e&&"string"==typeof e){var t=this.subscriptions[e];if(t)for(;t.length;){var i=t.pop();i&&i.dispose()}}else this.disposeAll()},e.prototype.disposeAll=function(){for(var e in this.subscriptions)this.dispose(e)},e}(),n.defaultListenerOptions=!0,r),W=function(){function e(e,t,i,n,r){this.owner=e,this.eventName=t,this.handler=i,this.capture="boolean"==typeof n?n:n.capture,this.bubbles=!this.capture,this.captureOrOptions=n,this.once=r,e.element.addEventListener(t,this,n),e._enqueueHandler(this)}return e.prototype.handleEvent=function(e){(0,this.handler)(e),this.once&&this.dispose()},e.prototype.dispose=function(){this.owner.element.removeEventListener(this.eventName,this,this.captureOrOptions),this.owner._dequeueHandler(this),this.owner=this.handler=null},e}(),K=function(){function e(){this.dependencies={}}return e.prototype.addDependency=function(e){this.dependencies[e]=!0},e.prototype.hasDependency=function(e){return e in this.dependencies},e}(),Q=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.targetShadowDOM=e,this.compileSurrogate=t,this.associatedModuleId=null};Q.normal=new Q;var $=function(){function e(){}return e.enhance=function(){var t=new e;return t.enhance=!0,t},e.unitTest=function(t,i){var n=new e;return n.type=t,n.attributes=i||{},n},e.element=function(t,i){var n=new e;return n.type=i,n.attributes={},n.anchorIsContainer=!(t.hasAttribute("containerless")||i.containerless),n.initiatedByBehavior=!0,n},e.attribute=function(t,i){var n=new e;return n.attrName=t,n.type=i||null,n.attributes={},n},e.dynamic=function(t,i,n){var r=new e;return r.host=t,r.viewModel=i,r.viewFactory=n,r.inheritBindingContext=!0,r},e}(),G=$.prototype;G.initiatedByBehavior=!1,G.enhance=!1,G.partReplacements=null,G.viewFactory=null,G.originalAttrName=null,G.skipContentProcessing=!1,G.contentFactory=null,G.viewModel=null,G.anchorIsContainer=!1,G.host=null,G.attributes=null,G.type=null,G.attrName=null,G.inheritBindingContext=!1,$.normal=new $;var X=(s=o=function(){function e(){}return e.shadowSlot=function(t){var i=new e;return i.parentInjectorId=t,i.shadowSlot=!0,i},e.contentExpression=function(t){var i=new e;return i.contentExpression=t,i},e.letElement=function(t){var i=new e;return i.expressions=t,i.letElement=!0,i},e.lifting=function(t,i){var n=new e;return n.parentInjectorId=t,n.expressions=e.noExpressions,n.behaviorInstructions=[i],n.viewFactory=i.viewFactory,n.providers=[i.type.target],n.lifting=!0,n},e.normal=function(t,i,n,r,o,s){var a=new e;return a.injectorId=t,a.parentInjectorId=i,a.providers=n,a.behaviorInstructions=r,a.expressions=o,a.anchorIsContainer=!s||s.anchorIsContainer,a.elementInstruction=s,a},e.surrogate=function(t,i,n,r){var o=new e;return o.expressions=n,o.behaviorInstructions=i,o.providers=t,o.values=r,o},e}(),o.noExpressions=Object.freeze([]),s),Y=X.prototype;Y.injectorId=null,Y.parentInjectorId=null,Y.shadowSlot=!1,Y.slotName=null,Y.slotFallbackFactory=null,Y.contentExpression=null,Y.letElement=!1,Y.expressions=null,Y.expressions=null,Y.providers=null,Y.viewFactory=null,Y.anchorIsContainer=!1,Y.elementInstruction=null,Y.lifting=!1,Y.values=null;var Z=N.e.create("aurelia:view-strategy",{validate:function(e){return"function"==typeof e.loadViewFactory||"View strategies must implement: loadViewFactory(viewEngine: ViewEngine, compileInstruction: ViewCompileInstruction, loadContext?: ResourceLoadContext): Promise<ViewFactory>"},compose:function(e){"function"!=typeof e.makeRelativeTo&&(e.makeRelativeTo=M.d.noop)}}),J=Z()(a=function(){function e(e){this.path=e,this.absolutePath=null}return e.prototype.loadViewFactory=function(e,t,i,n){return null===this.absolutePath&&this.moduleId&&(this.absolutePath=Object(j.d)(this.path,this.moduleId)),t.associatedModuleId=this.moduleId,e.loadViewFactory(this.absolutePath||this.path,t,i,n)},e.prototype.makeRelativeTo=function(e){null===this.absolutePath&&(this.absolutePath=Object(j.d)(this.path,e))},e}())||a,ee=Z()(l=function(){function e(e,t){this.moduleId=t.moduleId,this.viewUrl=e.convertOriginToViewUrl(t)}return e.prototype.loadViewFactory=function(e,t,i,n){return t.associatedModuleId=this.moduleId,e.loadViewFactory(this.viewUrl,t,i,n)},e}())||l,te=Z()(u=function(){function t(e,t){this.dependencies=e||null,this.dependencyBaseUrl=t||""}return t.prototype.loadViewFactory=function(t,i,n,r){var o=this.entry,s=this.dependencies;if(o&&o.factoryIsReady)return e.resolve(null);if(this.entry=o=new O.b(this.moduleId||this.dependencyBaseUrl),o.dependencies=[],o.templateIsLoaded=!0,null!==s)for(var a=0,l=s.length;a<l;++a){var u=s[a];"string"==typeof u||"function"==typeof u?o.addDependency(u):o.addDependency(u.from,u.as)}return i.associatedModuleId=this.moduleId,t.loadViewFactory(o,i,n,r)},t}())||u,ie=Z()(c=function(){function t(e,t){this.moduleId=e,this.entry=t}return t.prototype.loadViewFactory=function(t,i,n,r){var o=this.entry;return o.factoryIsReady?e.resolve(o.factory):(i.associatedModuleId=this.moduleId,t.loadViewFactory(o,i,n,r))},t}())||c,ne=Z()(h=function(){function t(e,t,i){this.markup=e,this.dependencies=t||null,this.dependencyBaseUrl=i||""}return t.prototype.loadViewFactory=function(t,i,n,r){var o=this.entry,s=this.dependencies;if(o&&o.factoryIsReady)return e.resolve(o.factory);if(this.entry=o=new O.b(this.moduleId||this.dependencyBaseUrl),o.template=M.b.createTemplateFromMarkup(this.markup),null!==s)for(var a=0,l=s.length;a<l;++a){var u=s[a];"string"==typeof u||"function"==typeof u?o.addDependency(u):o.addDependency(u.from,u.as)}return i.associatedModuleId=this.moduleId,t.loadViewFactory(o,i,n,r)},t}())||h,re=Z()(d=function(){function t(e){("string"==typeof e||e instanceof M.b.Element&&"TEMPLATE"===e.tagName)&&(e={template:e}),this.template=e.template,this.dependencies=e.dependencies||[],this.factoryIsReady=!1,this.onReady=null,this.moduleId="undefined"}return t.prototype.loadViewFactory=function(t,i,n,r){var o=this;if(this.factoryIsReady)return e.resolve(this.factory);var s=this.dependencies;return s=(s="function"==typeof s?s():s)||[],s=Array.isArray(s)?s:[s],e.all(s).then(function(n){var s=t.container,a=t.appResources,l=t.viewCompiler,u=new ve(a),c=void 0,h=[];r&&u.autoRegister(s,r);var d=n,p=Array.isArray(d),f=0;for(d=p?d:d[Symbol.iterator]();;){var v;if(p){if(f>=d.length)break;v=d[f++]}else{if((f=d.next()).done)break;v=f.value}var m=v;if("function"==typeof m)null!==(c=u.autoRegister(s,m)).elementName&&h.push(c);else{if(!m||"object"!==(void 0===m?"undefined":F(m)))throw new Error('dependency neither function nor object. Received: "'+(void 0===m?"undefined":F(m))+'"');for(var g in m){var w=m[g];"function"==typeof w&&null!==(c=u.autoRegister(s,w)).elementName&&h.push(c)}}}return e.all(h.map(function(e){return e.load(s,e.target)})).then(function(){var e=null!==o.template?l.compile(o.template,u,i):null;return o.factoryIsReady=!0,o.factory=e,e})})},t}())||d,oe=(f=p=function(){function e(){}return e.prototype.getViewStrategy=function(t){if(!t)return null;if("object"===(void 0===t?"undefined":F(t))&&"getViewStrategy"in t){var i=N.a.get(t.constructor);return"string"==typeof(t=t.getViewStrategy())&&(t=new J(t)),Z.assert(t),i.moduleId&&t.makeRelativeTo(i.moduleId),t}if("string"==typeof t&&(t=new J(t)),Z.validate(t))return t;if("function"!=typeof t&&(t=t.constructor),"$view"in t){var n=t.$view,r=void 0;return r=null===(n="function"==typeof n?n.call(t):n)?new te:n instanceof re?n:new re(n),N.c.define(e.viewStrategyMetadataKey,r,t),r}var o=N.a.get(t),s=N.c.get(e.viewStrategyMetadataKey,t);if(s)o.moduleId&&(s.moduleId=o.moduleId);else{if(!o.moduleId)throw new Error("Cannot determine default view strategy for object.",t);s=this.createFallbackViewStrategy(o)}return s},e.prototype.createFallbackViewStrategy=function(e){return new ee(this,e)},e.prototype.convertOriginToViewUrl=function(e){var t=e.moduleId;return(t.endsWith(".js")||t.endsWith(".ts")?t.substring(0,t.length-3):t)+".html"},e}(),p.viewStrategyMetadataKey="aurelia:view-strategy",f);function se(e){throw new Error("BindingLanguage must implement "+e+"().")}var ae=function(){function e(){}return e.prototype.inspectAttribute=function(e,t,i,n){se("inspectAttribute")},e.prototype.createAttributeInstruction=function(e,t,i,n){se("createAttributeInstruction")},e.prototype.createLetExpressions=function(e,t){se("createLetExpressions")},e.prototype.inspectTextContent=function(e,t){se("inspectTextContent")},e}(),le=Object.freeze([]),ue=function(){function e(e){this.element=e,this.element.auSlotAttribute=this}return e.inject=function(){return[M.b.Element]},e.prototype.valueChanged=function(e,t){},e}(),ce=function(){function e(e,t,i,n){this.anchor=e,this.anchor.viewSlot=this,this.name=t,this.destinationName=i,this.fallbackFactory=n,this.destinationSlot=null,this.projections=0,this.contentView=null,new ue(this.anchor).value=this.destinationName}return e.prototype.renderFallbackContent=function(e,t,i,n){if(null===this.contentView){this.contentView=this.fallbackFactory.create(this.ownerView.container),this.contentView.bind(this.ownerView.bindingContext,this.ownerView.overrideContext);var r=Object.create(null);r[this.destinationSlot.name]=this.destinationSlot,de.distributeView(this.contentView,r,i,n,this.destinationSlot.name)}},e.prototype.passThroughTo=function(e){this.destinationSlot=e},e.prototype.addNode=function(t,i,n,r){null!==this.contentView&&(this.contentView.removeNodes(),this.contentView.detached(),this.contentView.unbind(),this.contentView=null),i.viewSlot instanceof e?i.viewSlot.passThroughTo(this):(this.projections++,this.destinationSlot.addNode(t,i,n,r))},e.prototype.removeView=function(e,t){this.projections--,this.destinationSlot.removeView(e,t),this.needsFallbackRendering&&this.renderFallbackContent(null,le,t)},e.prototype.removeAll=function(e){this.projections=0,this.destinationSlot.removeAll(e),this.needsFallbackRendering&&this.renderFallbackContent(null,le,e)},e.prototype.projectFrom=function(e,t){this.destinationSlot.projectFrom(e,t)},e.prototype.created=function(e){this.ownerView=e},e.prototype.bind=function(e){this.contentView&&this.contentView.bind(e.bindingContext,e.overrideContext)},e.prototype.attached=function(){this.contentView&&this.contentView.attached()},e.prototype.detached=function(){this.contentView&&this.contentView.detached()},e.prototype.unbind=function(){this.contentView&&this.contentView.unbind()},B(e,[{key:"needsFallbackRendering",get:function(){return this.fallbackFactory&&0===this.projections}}]),e}(),he=function(){function e(e,t,i){this.anchor=e,this.anchor.isContentProjectionSource=!0,this.anchor.viewSlot=this,this.name=t,this.fallbackFactory=i,this.contentView=null,this.projections=0,this.children=[],this.projectFromAnchors=null,this.destinationSlots=null}return e.prototype.addNode=function(e,t,i,n,r){if(null!==this.contentView&&(this.contentView.removeNodes(),this.contentView.detached(),this.contentView.unbind(),this.contentView=null),t.viewSlot instanceof ce)t.viewSlot.passThroughTo(this);else if(null!==this.destinationSlots)de.distributeNodes(e,[t],this.destinationSlots,this,n);else{t.auOwnerView=e,t.auProjectionSource=i,t.auAssignedSlot=this;var o=this._findAnchor(e,t,i,n);o.parentNode.insertBefore(t,o),this.children.push(t),this.projections++}},e.prototype.removeView=function(e,t){if(null!==this.destinationSlots)de.undistributeView(e,this.destinationSlots,this);else if(this.contentView&&this.contentView.hasSlots)de.undistributeView(e,this.contentView.slots,t);else{var i=this.children.find(function(e){return e.auSlotProjectFrom===t});if(i){for(var n=i.auProjectionChildren,r=0,o=n.length;r<o;++r){var s=n[r];s.auOwnerView===e&&(n.splice(r,1),e.fragment.appendChild(s),r--,o--,this.projections--)}this.needsFallbackRendering&&this.renderFallbackContent(e,le,t)}}},e.prototype.removeAll=function(e){if(null!==this.destinationSlots)de.undistributeAll(this.destinationSlots,this);else if(this.contentView&&this.contentView.hasSlots)de.undistributeAll(this.contentView.slots,e);else{var t=this.children.find(function(t){return t.auSlotProjectFrom===e});if(t){for(var i=t.auProjectionChildren,n=0,r=i.length;n<r;++n){var o=i[n];o.auOwnerView.fragment.appendChild(o),this.projections--}t.auProjectionChildren=[],this.needsFallbackRendering&&this.renderFallbackContent(null,le,e)}}},e.prototype._findAnchor=function(e,t,i,n){if(i){var r=this.children.find(function(e){return e.auSlotProjectFrom===i});if(r){if(void 0!==n)for(var o=r.auProjectionChildren,s=-1,a=void 0,l=0,u=o.length;l<u;++l){var c=o[l];if(c.auOwnerView!==a&&(s++,a=c.auOwnerView,s>=n&&a!==e))return o.splice(l,0,t),c}return r.auProjectionChildren.push(t),r}}return this.anchor},e.prototype.projectTo=function(e){this.destinationSlots=e},e.prototype.projectFrom=function(e,t){var i=M.b.createComment("anchor"),n=this.anchor.parentNode;i.auSlotProjectFrom=t,i.auOwnerView=e,i.auProjectionChildren=[],n.insertBefore(i,this.anchor),this.children.push(i),null===this.projectFromAnchors&&(this.projectFromAnchors=[]),this.projectFromAnchors.push(i)},e.prototype.renderFallbackContent=function(e,t,i,n){if(null===this.contentView&&(this.contentView=this.fallbackFactory.create(this.ownerView.container),this.contentView.bind(this.ownerView.bindingContext,this.ownerView.overrideContext),this.contentView.insertNodesBefore(this.anchor)),this.contentView.hasSlots){var r=this.contentView.slots,o=this.projectFromAnchors;if(null!==o)for(var s in r)for(var a=r[s],l=0,u=o.length;l<u;++l){var c=o[l];a.projectFrom(c.auOwnerView,c.auSlotProjectFrom)}this.fallbackSlots=r,de.distributeNodes(e,t,r,i,n)}},e.prototype.created=function(e){this.ownerView=e},e.prototype.bind=function(e){this.contentView&&this.contentView.bind(e.bindingContext,e.overrideContext)},e.prototype.attached=function(){this.contentView&&this.contentView.attached()},e.prototype.detached=function(){this.contentView&&this.contentView.detached()},e.prototype.unbind=function(){this.contentView&&this.contentView.unbind()},B(e,[{key:"needsFallbackRendering",get:function(){return this.fallbackFactory&&0===this.projections}}]),e}(),de=(m=v=function(){function e(){}return e.getSlotName=function(t){return void 0===t.auSlotAttribute?e.defaultSlotKey:t.auSlotAttribute.value},e.distributeView=function(t,i,n,r,o){var s=void 0;if(null===t)s=le;else{var a=t.fragment.childNodes,l=a.length;s=new Array(l);for(var u=0;u<l;++u)s[u]=a[u]}e.distributeNodes(t,s,i,n,r,o)},e.undistributeView=function(e,t,i){for(var n in t)t[n].removeView(e,i)},e.undistributeAll=function(e,t){for(var i in e)e[i].removeAll(t)},e.distributeNodes=function(t,i,n,r,o,s){for(var a=0,l=i.length;a<l;++a){var u=i[a],c=u.nodeType;if(u.isContentProjectionSource){for(var h in u.viewSlot.projectTo(n),n)n[h].projectFrom(t,u.viewSlot);i.splice(a,1),l--,a--}else if(1===c||3===c||u.viewSlot instanceof ce)if(3===c&&H(u))i.splice(a,1),l--,a--;else{var d=n[s||e.getSlotName(u)];d&&(d.addNode(t,u,r,o),i.splice(a,1),l--,a--)}else i.splice(a,1),l--,a--}for(var p in n){var f=n[p];f.needsFallbackRendering&&f.renderFallbackContent(t,i,r,o)}},e}(),v.defaultSlotKey="__au-default-slot-key__",m);function pe(e,t,i,n){if(t){var r=e[t];if(r){if(r!==i)throw new Error("Attempted to register "+n+" when one with the same name already exists. Name: "+t+".")}else e[t]=i}}function fe(e,t){if(/[A-Z]/.test(e)){var i=z(e);return _.getLogger("templating").warn("'"+e+"' is not a valid "+t+" name and has been converted to '"+i+"'. Upper-case letters are not allowed because the DOM is not case-sensitive."),i}return e}var ve=function(){function e(e,t){this.bindingLanguage=null,this.parent=e||null,this.hasParent=null!==this.parent,this.viewUrl=t||"",this.lookupFunctions={valueConverters:this.getValueConverter.bind(this),bindingBehaviors:this.getBindingBehavior.bind(this)},this.attributes=Object.create(null),this.elements=Object.create(null),this.valueConverters=Object.create(null),this.bindingBehaviors=Object.create(null),this.attributeMap=Object.create(null),this.values=Object.create(null),this.beforeCompile=this.afterCompile=this.beforeCreate=this.afterCreate=this.beforeBind=this.beforeUnbind=!1}return e.convention=function(e,t){var i=void 0;if(t&&"__au_resource__"in t)return t;if("$resource"in e){var n=e.$resource;if("string"==typeof n)(i=t||new Qe).__au_resource__=!0,i.elementName||(i.elementName=fe(n,"custom element"));else{"function"==typeof n&&(n=n.call(e)),"string"==typeof n&&(n={name:n});var r=(n=Object.assign({},n)).type||"element",o=n.name;switch(r){case"element":case"attribute":(i=t||new Qe).__au_resource__=!0,"element"===r?i.elementName||(i.elementName=o?fe(o,"custom element"):z(e.name)):i.attributeName||(i.attributeName=o?fe(o,"custom attribute"):z(e.name)),"templateController"in n&&(n.liftsContent=n.templateController,delete n.templateController),"defaultBindingMode"in n&&void 0!==i.attributeDefaultBindingMode&&(n.attributeDefaultBindingMode=n.defaultBindingMode,delete n.defaultBindingMode),delete n.name,Object.assign(i,n);break;case"valueConverter":i=new I.w(Object(I.z)(o||e.name));break;case"bindingBehavior":i=new I.f(Object(I.z)(o||e.name));break;case"viewEngineHooks":i=new U}}if(i instanceof Qe){var s="string"==typeof n?void 0:n.bindables,a=i.properties;if(Array.isArray(s))for(var l=0,u=s.length;u>l;++l){var c=s[l];if(!c||"string"!=typeof c&&!c.name)throw new Error('Invalid bindable property at "'+l+'" for class "'+e.name+'". Expected either a string or an object with "name" property.');for(var h=new Ue(c),d=!1,p=0,f=a.length;f>p;++p)if(a[p].name===h.name){d=!0;break}d||h.registerWith(e,i)}}}return i},e.prototype._tryAddHook=function(e,t){if("function"==typeof e[t]){for(var i=e[t].bind(e),n=1,r=void 0;void 0!==this[r=t+n.toString()];)n++;this[t]=!0,this[r]=i}},e.prototype._invokeHook=function(e,t,i,n,r){if(this.hasParent&&this.parent._invokeHook(e,t,i,n,r),this[e]){this[e+"1"](t,i,n,r);var o=e+"2";if(this[o]&&(this[o](t,i,n,r),this[o=e+"3"])){this[o](t,i,n,r);for(var s=4;void 0!==this[o=e+s.toString()];)this[o](t,i,n,r),s++}}},e.prototype.registerViewEngineHooks=function(e){this._tryAddHook(e,"beforeCompile"),this._tryAddHook(e,"afterCompile"),this._tryAddHook(e,"beforeCreate"),this._tryAddHook(e,"afterCreate"),this._tryAddHook(e,"beforeBind"),this._tryAddHook(e,"beforeUnbind")},e.prototype.getBindingLanguage=function(e){return this.bindingLanguage||(this.bindingLanguage=e)},e.prototype.patchInParent=function(e){var t=this.parent;this.parent=e||null,this.hasParent=null!==this.parent,null===e.parent&&(e.parent=t,e.hasParent=null!==t)},e.prototype.relativeToView=function(e){return Object(j.d)(e,this.viewUrl)},e.prototype.registerElement=function(e,t){pe(this.elements,e,t,"an Element")},e.prototype.getElement=function(e){return this.elements[e]||(this.hasParent?this.parent.getElement(e):null)},e.prototype.mapAttribute=function(e){return this.attributeMap[e]||(this.hasParent?this.parent.mapAttribute(e):null)},e.prototype.registerAttribute=function(e,t,i){this.attributeMap[e]=i,pe(this.attributes,e,t,"an Attribute")},e.prototype.getAttribute=function(e){return this.attributes[e]||(this.hasParent?this.parent.getAttribute(e):null)},e.prototype.registerValueConverter=function(e,t){pe(this.valueConverters,e,t,"a ValueConverter")},e.prototype.getValueConverter=function(e){return this.valueConverters[e]||(this.hasParent?this.parent.getValueConverter(e):null)},e.prototype.registerBindingBehavior=function(e,t){pe(this.bindingBehaviors,e,t,"a BindingBehavior")},e.prototype.getBindingBehavior=function(e){return this.bindingBehaviors[e]||(this.hasParent?this.parent.getBindingBehavior(e):null)},e.prototype.registerValue=function(e,t){pe(this.values,e,t,"a value")},e.prototype.getValue=function(e){return this.values[e]||(this.hasParent?this.parent.getValue(e):null)},e.prototype.autoRegister=function(t,i){var n=N.c.getOwn(N.c.resource,i);return n?n instanceof Qe&&(e.convention(i,n),null===n.attributeName&&null===n.elementName&&Qe.convention(i.name,n),null===n.attributeName&&null===n.elementName&&(n.elementName=z(i.name))):((n=e.convention(i)||Qe.convention(i.name)||I.w.convention(i.name)||I.f.convention(i.name)||U.convention(i.name))||((n=new Qe).elementName=z(i.name)),N.c.define(N.c.resource,n,i)),n.initialize(t,i),n.register(this),n},e}(),me=function(){function e(e,t,i,n,r,o,s){for(var a in this.container=e,this.viewFactory=t,this.resources=t.resources,this.fragment=i,this.firstChild=i.firstChild,this.lastChild=i.lastChild,this.controllers=n,this.bindings=r,this.children=o,this.slots=s,this.hasSlots=!1,this.fromCache=!1,this.isBound=!1,this.isAttached=!1,this.bindingContext=null,this.overrideContext=null,this.controller=null,this.viewModelScope=null,this.animatableElement=void 0,this._isUserControlled=!1,this.contentView=null,s){this.hasSlots=!0;break}}return e.prototype.returnToCache=function(){this.viewFactory.returnViewToCache(this)},e.prototype.created=function(){var e,t=void 0,i=this.controllers;for(t=0,e=i.length;t<e;++t)i[t].created(this)},e.prototype.bind=function(e,t,i){var n=void 0,r=void 0,o=void 0,s=void 0,a=void 0;if(!i||!this._isUserControlled){if(this.isBound){if(this.bindingContext===e)return;this.unbind()}for(this.isBound=!0,this.bindingContext=e,this.overrideContext=t||Object(I.B)(e),this.resources._invokeHook("beforeBind",this),s=0,a=(r=this.bindings).length;s<a;++s)r[s].bind(this);for(null!==this.viewModelScope&&(e.bind(this.viewModelScope.bindingContext,this.viewModelScope.overrideContext),this.viewModelScope=null),s=0,a=(n=this.controllers).length;s<a;++s)n[s].bind(this);for(s=0,a=(o=this.children).length;s<a;++s)o[s].bind(e,t,!0);this.hasSlots&&de.distributeView(this.contentView,this.slots)}},e.prototype.addBinding=function(e){this.bindings.push(e),this.isBound&&e.bind(this)},e.prototype.unbind=function(){var e=void 0,t=void 0,i=void 0,n=void 0,r=void 0;if(this.isBound){for(this.isBound=!1,this.resources._invokeHook("beforeUnbind",this),null!==this.controller&&this.controller.unbind(),n=0,r=(t=this.bindings).length;n<r;++n)t[n].unbind();for(n=0,r=(e=this.controllers).length;n<r;++n)e[n].unbind();for(n=0,r=(i=this.children).length;n<r;++n)i[n].unbind();this.bindingContext=null,this.overrideContext=null}},e.prototype.insertNodesBefore=function(e){e.parentNode.insertBefore(this.fragment,e)},e.prototype.appendNodesTo=function(e){e.appendChild(this.fragment)},e.prototype.removeNodes=function(){for(var e=this.fragment,t=this.firstChild,i=this.lastChild,n=void 0;t&&(n=t.nextSibling,e.appendChild(t),t!==i);)t=n},e.prototype.attached=function(){var e=void 0,t=void 0,i=void 0,n=void 0;if(!this.isAttached){for(this.isAttached=!0,null!==this.controller&&this.controller.attached(),i=0,n=(e=this.controllers).length;i<n;++i)e[i].attached();for(i=0,n=(t=this.children).length;i<n;++i)t[i].attached()}},e.prototype.detached=function(){var e=void 0,t=void 0,i=void 0,n=void 0;if(this.isAttached){for(this.isAttached=!1,null!==this.controller&&this.controller.detached(),i=0,n=(e=this.controllers).length;i<n;++i)e[i].detached();for(i=0,n=(t=this.children).length;i<n;++i)t[i].detached()}},e}();var ge=function(){function t(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:T.instance;this.anchor=e,this.anchorIsContainer=t,this.bindingContext=null,this.overrideContext=null,this.animator=i,this.children=[],this.isBound=!1,this.isAttached=!1,this.contentSelectors=null,e.viewSlot=this,e.isContentProjectionSource=!1}return t.prototype.animateView=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"enter",i=function(e){if(void 0!==e.animatableElement)return e.animatableElement;for(var t=e.firstChild;t&&1!==t.nodeType;)t=t.nextSibling;return t&&1===t.nodeType?e.animatableElement=t.classList.contains("au-animate")?t:null:e.animatableElement=null}(e);if(null!==i)switch(t){case"enter":return this.animator.enter(i);case"leave":return this.animator.leave(i);default:throw new Error("Invalid animation direction: "+t)}},t.prototype.transformChildNodesIntoView=function(){var e=this.anchor;this.children.push({fragment:e,firstChild:e.firstChild,lastChild:e.lastChild,returnToCache:function(){},removeNodes:function(){for(var t=void 0;t=e.lastChild;)e.removeChild(t)},created:function(){},bind:function(){},unbind:function(){},attached:function(){},detached:function(){}})},t.prototype.bind=function(e,t){var i,n=void 0,r=void 0;if(this.isBound){if(this.bindingContext===e)return;this.unbind()}for(this.isBound=!0,this.bindingContext=e=e||this.bindingContext,this.overrideContext=t=t||this.overrideContext,n=0,i=(r=this.children).length;n<i;++n)r[n].bind(e,t,!0)},t.prototype.unbind=function(){if(this.isBound){var e,t=void 0,i=this.children;for(this.isBound=!1,this.bindingContext=null,this.overrideContext=null,t=0,e=i.length;t<e;++t)i[t].unbind()}},t.prototype.add=function(e){if(this.anchorIsContainer?e.appendNodesTo(this.anchor):e.insertNodesBefore(this.anchor),this.children.push(e),this.isAttached)return e.attached(),this.animateView(e,"enter")},t.prototype.insert=function(e,t){var i=this.children,n=i.length;return 0===e&&0===n||e>=n?this.add(t):(t.insertNodesBefore(i[e].firstChild),i.splice(e,0,t),this.isAttached?(t.attached(),this.animateView(t,"enter")):void 0)},t.prototype.move=function(e,t){if(e!==t){var i=this.children,n=i[e];n.removeNodes(),n.insertNodesBefore(i[t].firstChild),i.splice(e,1),i.splice(t,0,n)}},t.prototype.remove=function(e,t,i){return this.removeAt(this.children.indexOf(e),t,i)},t.prototype.removeMany=function(t,i,n){var r=this,o=this.children,s=t.length,a=void 0,l=[];t.forEach(function(e){if(n)e.removeNodes();else{var t=r.animateView(e,"leave");t?l.push(t.then(function(){return e.removeNodes()})):e.removeNodes()}});var u=function(){if(r.isAttached)for(a=0;a<s;++a)t[a].detached();if(i)for(a=0;a<s;++a)t[a].returnToCache();for(a=0;a<s;++a){var e=o.indexOf(t[a]);e>=0&&o.splice(e,1)}};return l.length>0?e.all(l).then(function(){return u()}):u()},t.prototype.removeAt=function(e,t,i){var n=this,r=this.children[e],o=function(){return e=n.children.indexOf(r),r.removeNodes(),n.children.splice(e,1),n.isAttached&&r.detached(),t&&r.returnToCache(),r};if(!i){var s=this.animateView(r,"leave");if(s)return s.then(function(){return o()})}return o()},t.prototype.removeAll=function(t,i){var n=this,r=this.children,o=r.length,s=void 0,a=[];r.forEach(function(e){if(i)e.removeNodes();else{var t=n.animateView(e,"leave");t?a.push(t.then(function(){return e.removeNodes()})):e.removeNodes()}});var l=function(){if(n.isAttached)for(s=0;s<o;++s)r[s].detached();if(t)for(s=0;s<o;++s){var e=r[s];e&&e.returnToCache()}n.children=[]};return a.length>0?e.all(a).then(function(){return l()}):l()},t.prototype.attached=function(){var e,t,i=void 0,n=void 0;if(!this.isAttached)for(this.isAttached=!0,i=0,e=(t=this.children).length;i<e;++i)(n=t[i]).attached(),this.animateView(n,"enter")},t.prototype.detached=function(){var e=void 0,t=void 0,i=void 0;if(this.isAttached)for(this.isAttached=!1,e=0,t=(i=this.children).length;e<t;++e)i[e].detached()},t.prototype.projectTo=function(e){var t=this;this.projectToSlots=e,this.add=this._projectionAdd,this.insert=this._projectionInsert,this.move=this._projectionMove,this.remove=this._projectionRemove,this.removeAt=this._projectionRemoveAt,this.removeMany=this._projectionRemoveMany,this.removeAll=this._projectionRemoveAll,this.children.forEach(function(i){return de.distributeView(i,e,t)})},t.prototype._projectionAdd=function(e){de.distributeView(e,this.projectToSlots,this),this.children.push(e),this.isAttached&&e.attached()},t.prototype._projectionInsert=function(e,t){0===e&&!this.children.length||e>=this.children.length?this.add(t):(de.distributeView(t,this.projectToSlots,this,e),this.children.splice(e,0,t),this.isAttached&&t.attached())},t.prototype._projectionMove=function(e,t){if(e!==t){var i=this.children,n=i[e];de.undistributeView(n,this.projectToSlots,this),de.distributeView(n,this.projectToSlots,this,t),i.splice(e,1),i.splice(t,0,n)}},t.prototype._projectionRemove=function(e,t){de.undistributeView(e,this.projectToSlots,this),this.children.splice(this.children.indexOf(e),1),this.isAttached&&e.detached(),t&&e.returnToCache()},t.prototype._projectionRemoveAt=function(e,t){var i=this.children[e];de.undistributeView(i,this.projectToSlots,this),this.children.splice(e,1),this.isAttached&&i.detached(),t&&i.returnToCache()},t.prototype._projectionRemoveMany=function(e,t){var i=this;e.forEach(function(e){return i.remove(e,t)})},t.prototype._projectionRemoveAll=function(e){de.undistributeAll(this.projectToSlots,this);for(var t=this.children,i=t.length,n=0;n<i;++n)e?t[n].returnToCache():this.isAttached&&t[n].detached();this.children=[]},t}(),we=new(Object(x.f)(g=function(){function e(){}return e.prototype.get=function(e,t){var i=t.__providerId__;return i in e?e[i]:e[i]=e.invoke(t)},e}())||g);function be(e){if(e===M.b.Element)return this.element;if(e===Ne){if(this.boundViewFactory)return this.boundViewFactory;var t=this.instruction.viewFactory,i=this.partReplacements;return i&&(t=i[t.part]||t),this.boundViewFactory=new Ne(this,t,i),this.boundViewFactory}return e===ge?(void 0===this.viewSlot&&(this.viewSlot=new ge(this.element,this.instruction.anchorIsContainer),this.element.isContentProjectionSource=this.instruction.lifting,this.children.push(this.viewSlot)),this.viewSlot):e===q?this.elementEvents||(this.elementEvents=new q(this.element)):e===P?this.compositionTransaction||(this.compositionTransaction=this.parent.get(e)):e===ve?this.viewResources:e===X?this.instruction:this.superGet(e)}function ye(e){return this._element.hasAttribute(e)}function Ce(e){return this._element.getAttribute(e)}function Se(e,t){this._element.setAttribute(e,t)}function Ve(e,t,i,n,r,o,s,a,l){var u=i.behaviorInstructions,c=i.expressions,h=void 0,d=void 0,p=void 0,f=void 0,v=void 0;if(i.contentExpression)return r.push(i.contentExpression.createBinding(t.nextSibling)),t.nextSibling.auInterpolationTarget=!0,void t.parentNode.removeChild(t);if(i.shadowSlot){var m=M.b.createComment("slot"),g=void 0;return g=i.slotDestination?new ce(m,i.slotName,i.slotDestination,i.slotFallbackFactory):new he(m,i.slotName,i.slotFallbackFactory),M.b.replaceNode(m,t),s[i.slotName]=g,void n.push(g)}if(i.letElement){for(d=0,p=c.length;d<p;++d)r.push(c[d].createBinding());t.parentNode.removeChild(t)}else{if(u.length)for(i.anchorIsContainer||(t=function(e,t){var i=M.b.createComment("anchor");if(t){var n=e.firstChild;n&&"AU-CONTENT"===n.tagName&&(i.contentElement=n),i._element=e,i.hasAttribute=ye,i.getAttribute=Ce,i.setAttribute=Se}return M.b.replaceNode(i,e),i}(t,i.elementInstruction)),e[i.injectorId]=h=function(e,t,i,n,r,o){var s,a=e.createChild(),l=void 0;for(a.element=t,a.instruction=i,a.children=n,a.viewResources=o,a.partReplacements=r,l=(s=i.providers).length;l--;)a._resolvers.set(s[l],we);return a.superGet=a.get,a.get=be,a}(e[i.parentInjectorId],t,i,o,a,l),d=0,p=u.length;d<p;++d)v=(f=u[d]).type.create(h,f,t,r),n.push(v);for(d=0,p=c.length;d<p;++d)r.push(c[d].createBinding(t))}}function Ae(e,t){var i=e.split(";"),n=void 0,r=void 0,o=void 0,s=void 0,a=void 0;for(t=t||{},r=0;r<i.length;r++)n=(o=i[r]).indexOf(":"),s=o.substring(0,n).trim(),a=o.substring(n+1).trim(),t[s]=a;return t}function _e(e){var t="";for(var i in e)t+=i+":"+e[i]+";";return t}var Ne=function(){function e(e,t,i){this.parentContainer=e,this.viewFactory=t,this.factoryCreateInstruction={partReplacements:i}}return e.prototype.create=function(){var e=this.viewFactory.create(this.parentContainer.createChild(),this.factoryCreateInstruction);return e._isUserControlled=!0,e},e.prototype.setCacheSize=function(e,t){this.viewFactory.setCacheSize(e,t)},e.prototype.getCachedView=function(){return this.viewFactory.getCachedView()},e.prototype.returnViewToCache=function(e){this.viewFactory.returnViewToCache(e)},B(e,[{key:"isCaching",get:function(){return this.viewFactory.isCaching}}]),e}(),Me=function(){function e(e,t,i){this.isCaching=!1,this.template=e,this.instructions=t,this.resources=i,this.cacheSize=-1,this.cache=null}return e.prototype.setCacheSize=function(e,t){e&&("*"===e?e=Number.MAX_VALUE:"string"==typeof e&&(e=parseInt(e,10))),-1!==this.cacheSize&&t||(this.cacheSize=e),this.cacheSize>0?this.cache=[]:this.cache=null,this.isCaching=this.cacheSize>0},e.prototype.getCachedView=function(){return null!==this.cache&&this.cache.pop()||null},e.prototype.returnViewToCache=function(e){e.isAttached&&e.detached(),e.isBound&&e.unbind(),null!==this.cache&&this.cache.length<this.cacheSize&&(e.fromCache=!0,this.cache.push(e))},e.prototype.create=function(e,t,i){t=t||$.normal;var n=this.getCachedView();if(null!==n)return n;var r,o=t.enhance?this.template:this.template.cloneNode(!0),s=o.querySelectorAll(".au-target"),a=this.instructions,l=this.resources,u=[],c=[],h=[],d=Object.create(null),p={root:e},f=t.partReplacements,v=void 0,m=void 0,g=void 0,w=void 0;for(this.resources._invokeHook("beforeCreate",this,e,o,t),i&&null!==this.surrogateInstruction&&function(e,t,i,n,r,o){var s=i.behaviorInstructions,a=i.expressions,l=i.providers,u=i.values,c=void 0,h=void 0,d=void 0,p=void 0,f=void 0;for(c=l.length;c--;)e._resolvers.set(l[c],we);for(var v in u)if(f=t.getAttribute(v)){if("class"===v)t.setAttribute("class",f+" "+u[v]);else if("style"===v){var m=Ae(u[v]);Ae(f,m),t.setAttribute("style",_e(m))}}else t.setAttribute(v,u[v]);if(s.length)for(c=0,h=s.length;c<h;++c)(p=(d=s[c]).type.create(e,d,t,r)).contentView&&o.push(p.contentView),n.push(p);for(c=0,h=a.length;c<h;++c)r.push(a[c].createBinding(t))}(e,i,this.surrogateInstruction,u,c,h),t.enhance&&o.hasAttribute("au-target-id")&&(w=a[(g=o).getAttribute("au-target-id")],Ve(p,g,w,u,c,h,d,f,l)),v=0,r=s.length;v<r;++v)w=a[(g=s[v]).getAttribute("au-target-id")],Ve(p,g,w,u,c,h,d,f,l);return m=new me(e,this,o,u,c,h,d),t.initiatedByBehavior||m.created(),this.resources._invokeHook("afterCreate",m),m},e}(),Oe=0;var je=0;function Ie(e){var t=e.getAttribute("class"),i=(++je).toString();return e.setAttribute("class",t?t+" au-target":"au-target"),e.setAttribute("au-target-id",i),i}var xe=ae.prototype.createLetExpressions,ke=Object(x.e)(ae,ve)(w=function(){function e(e,t){this.bindingLanguage=e,this.resources=t}return e.prototype.compile=function(e,t,i){t=t||this.resources,i=i||Q.normal;var n=void 0,r=void 0,o=void 0;(e="string"==typeof e?M.b.createTemplateFromMarkup(e):e).content?(r=e.getAttribute("part"),o=e.getAttribute("view-cache"),n=M.b.adoptNode(e.content)):n=e,i.targetShadowDOM=i.targetShadowDOM&&M.c.shadowDOM,t._invokeHook("beforeCompile",n,t,i);var s={};this._compileNode(n,t,s,e,"root",!i.targetShadowDOM);var a=n.firstChild;if(a&&1===a.nodeType){var l=a.getAttribute("au-target-id");if(l){var u=s[l];(u.shadowSlot||u.lifting||u.elementInstruction&&!u.elementInstruction.anchorIsContainer)&&n.insertBefore(M.b.createComment("view"),a)}}var c=new Me(n,s,t);return c.surrogateInstruction=i.compileSurrogate?this._compileSurrogate(e,t):null,c.part=r,o&&c.setCacheSize(o),t._invokeHook("afterCompile",c),c},e.prototype._compileNode=function(e,t,i,n,r,o){switch(e.nodeType){case 1:return this._compileElement(e,t,i,n,r,o);case 3:var s=t.getBindingLanguage(this.bindingLanguage).inspectTextContent(t,e.wholeText);if(s){var a=M.b.createElement("au-marker"),l=Ie(a);for((e.parentNode||n).insertBefore(a,e),e.textContent=" ",i[l]=X.contentExpression(s);e.nextSibling&&3===e.nextSibling.nodeType;)(e.parentNode||n).removeChild(e.nextSibling)}else for(;e.nextSibling&&3===e.nextSibling.nodeType;)e=e.nextSibling;return e.nextSibling;case 11:for(var u=e.firstChild;u;)u=this._compileNode(u,t,i,e,r,o)}return e.nextSibling},e.prototype._compileSurrogate=function(e,t){var i=e.tagName.toLowerCase(),n=e.attributes,r=t.getBindingLanguage(this.bindingLanguage),o=void 0,s=void 0,a=void 0,l=void 0,u=void 0,c=void 0,h=void 0,d=void 0,p=void 0,f=void 0,v=[],m=void 0,g=[],w={},b=!1,y=[];for(l=0,u=n.length;l<u;++l){if(h=(c=n[l]).name,d=c.value,p=r.inspectAttribute(t,i,h,d),(f=t.getAttribute(p.attrName))&&(o=t.mapAttribute(p.attrName))&&(s=f.attributes[o])&&(p.defaultBindingMode=s.defaultBindingMode,p.command||p.expression||(p.command=s.hasOptions?"options":null),p.command&&"options"!==p.command&&f.primaryProperty)){var C=f.primaryProperty;h=p.attrName=C.attribute,p.defaultBindingMode=C.defaultBindingMode}if(a=r.createAttributeInstruction(t,e,p,void 0,f))if(a.alteredAttr&&(f=t.getAttribute(a.attrName)),a.discrete)v.push(a);else if(f){if(a.type=f,this._configureProperties(a,t),f.liftsContent)throw new Error("You cannot place a template controller on a surrogate element.");g.push(a)}else v.push(a.attributes[a.attrName]);else if(f){if((a=$.attribute(h,f)).attributes[t.mapAttribute(h)]=d,f.liftsContent)throw new Error("You cannot place a template controller on a surrogate element.");g.push(a)}else"id"!==h&&"part"!==h&&"replace-part"!==h&&(b=!0,w[h]=d)}if(v.length||g.length||b){for(l=0,u=g.length;l<u;++l)(a=g[l]).type.compile(this,t,e,a),y.push(a.type.target);for(l=0,u=v.length;l<u;++l)void 0!==(m=v[l]).attrToRemove&&e.removeAttribute(m.attrToRemove);return X.surrogate(y,g,v,w)}return null},e.prototype._compileElement=function(e,t,i,n,r,o){var s=e.tagName.toLowerCase(),a=e.attributes,l=[],u=void 0,c=[],h=[],d=t.getBindingLanguage(this.bindingLanguage),p=void 0,f=void 0,v=void 0,m=void 0,g=void 0,w=void 0,b=void 0,y=void 0,C=void 0,S=void 0,V=void 0,A=void 0,_=void 0,N=void 0,O=void 0,j=void 0;if("slot"===s)return o&&(e=function(e,t,i,n,r){var o=M.b.createElement("au-shadow-slot");M.b.replaceNode(o,i);var s=Ie(o),a=X.shadowSlot(r);if(a.slotName=i.getAttribute("name")||de.defaultSlotKey,a.slotDestination=i.getAttribute("slot"),i.innerHTML.trim()){for(var l=M.b.createDocumentFragment(),u=void 0;u=i.firstChild;)l.appendChild(u);a.slotFallbackFactory=e.compile(l,t)}return n[s]=a,o}(this,t,e,i,r)),e.nextSibling;if("template"===s){if(!("content"in e))throw new Error("You cannot place a template element within "+e.namespaceURI+" namespace");(f=this.compile(e,t)).part=e.getAttribute("part")}else{if(v=t.getElement(e.getAttribute("as-element")||s),"let"===s&&!v&&d.createLetExpressions!==xe)return l=d.createLetExpressions(t,e),i[Ie(e)]=X.letElement(l),e.nextSibling;v&&(m=$.element(e,v),v.processAttributes(this,t,e,a,m),c.push(m))}for(w=0,b=a.length;w<b;++w){if(V=C=(y=a[w]).name,S=y.value,_=d.inspectAttribute(t,s,C,S),o&&"slot"===_.attrName&&(_.attrName=C="au-slot"),g=null,v=t.getAttribute(_.attrName)){if((O=t.mapAttribute(_.attrName))&&(N=v.attributes[O])&&(_.defaultBindingMode=N.defaultBindingMode,_.command||_.expression||(_.command=N.hasOptions?"options":null),_.command&&"options"!==_.command&&v.primaryProperty)){var I=v.primaryProperty;C=_.attrName=I.attribute,_.defaultBindingMode=I.defaultBindingMode}}else m&&(g=m.type.attributes[_.attrName])&&(_.defaultBindingMode=g.defaultBindingMode);if(A=g?d.createAttributeInstruction(t,e,_,m):d.createAttributeInstruction(t,e,_,void 0,v))if(A.alteredAttr&&(v=t.getAttribute(A.attrName)),A.discrete)l.push(A);else if(v){if(A.type=v,this._configureProperties(A,t),v.liftsContent){A.originalAttrName=V,p=A;break}c.push(A)}else g?m.attributes[_.attrName].targetProperty=g.name:l.push(A.attributes[A.attrName]);else if(v){if((A=$.attribute(C,v)).attributes[t.mapAttribute(C)]=S,v.liftsContent){A.originalAttrName=V,p=A;break}c.push(A)}else g&&(m.attributes[C]=S)}if(p)p.viewFactory=f,i[Ie(e=p.type.compile(this,t,e,p,n))]=X.lifting(r,p);else{var x=!1;if(l.length||c.length){for(j=!!c.length&&++Oe,w=0,b=c.length;w<b;++w)(A=c[w]).type.compile(this,t,e,A,n),h.push(A.type.target),x=x||A.skipContentProcessing;for(w=0,b=l.length;w<b;++w)void 0!==(u=l[w]).attrToRemove&&e.removeAttribute(u.attrToRemove);i[Ie(e)]=X.normal(j,r,h,c,l,m)}if(x)return e.nextSibling;for(var k=e.firstChild;k;)k=this._compileNode(k,t,i,e,j||r,o)}return e.nextSibling},e.prototype._configureProperties=function(e,t){var i=e.type,n=e.attrName,r=e.attributes,o=void 0,s=void 0,a=void 0,l=t.mapAttribute(n);for(s in l&&n in r&&l!==n&&(r[l]=r[n],delete r[n]),r)null!==(a=r[s])&&"object"===(void 0===a?"undefined":F(a))&&(o=i.attributes[s],a.targetProperty=void 0!==o?o.name:s)},e}())||w,Be=function(){function t(e){this.id=e,this.moduleInstance=null,this.mainResource=null,this.resources=null,this.viewStrategy=null,this.isInitialized=!1,this.onLoaded=null,this.loadContext=null}return t.prototype.initialize=function(e){var t=this.mainResource,i=this.resources,n=this.viewStrategy;if(!this.isInitialized){this.isInitialized=!0,void 0!==t&&(t.metadata.viewStrategy=n,t.initialize(e));for(var r=0,o=i.length;r<o;++r)(t=i[r]).metadata.viewStrategy=n,t.initialize(e)}},t.prototype.register=function(e,t){var i=this.mainResource,n=this.resources;void 0!==i&&(i.register(e,t),t=null);for(var r=0,o=n.length;r<o;++r)n[r].register(e,t),t=null},t.prototype.load=function(t,i){if(null!==this.onLoaded)return this.loadContext===i?e.resolve():this.onLoaded;var n=this.mainResource,r=this.resources,o=void 0;if(void 0!==n){(o=new Array(r.length+1))[0]=n.load(t,i);for(var s=0,a=r.length;s<a;++s)o[s+1]=r[s].load(t,i)}else{o=new Array(r.length);for(var l=0,u=r.length;l<u;++l)o[l]=r[l].load(t,i)}return this.loadContext=i,this.onLoaded=e.all(o),this.onLoaded},t}(),Fe=function(){function e(e,t,i){i||(i=N.c.get(N.c.resource,t))||((i=new Qe).elementName=z(e),N.c.define(N.c.resource,i,t)),i instanceof Qe?void 0===i.elementName?i.elementName=z(e):void 0===i.attributeName?i.attributeName=z(e):null===i.attributeName&&null===i.elementName&&Qe.convention(e,i):i.name||(i.name=z(e)),this.metadata=i,this.value=t}return e.prototype.initialize=function(e){this.metadata.initialize(e,this.value)},e.prototype.register=function(e,t){this.metadata.register(e,t)},e.prototype.load=function(e,t){return this.metadata.load(e,this.value,t)},e}(),Te=function(){function e(){this.cache=Object.create(null)}return e.prototype.getAnalysis=function(e){return this.cache[e]},e.prototype.analyze=function(e,t,i){var n=void 0,r=void 0,o=void 0,s=void 0,a=void 0,l=void 0,u=[],c=void 0,h=void 0,d=void 0;if(d=this.cache[e])return d;for(a in d=new Be(e),this.cache[e]=d,"function"==typeof t&&(t={default:t}),i&&(n=new Fe(i,t[i])),t)l=t[a],a!==i&&"function"==typeof l&&((s=N.c.get(N.c.resource,l))?(s instanceof Qe&&(ve.convention(l,s),null===s.attributeName&&null===s.elementName&&Qe.convention(a,s),null===s.attributeName&&null===s.elementName&&(s.elementName=z(a))),!n&&s instanceof Qe&&null!==s.elementName?n=new Fe(a,l,s):u.push(new Fe(a,l,s))):Z.decorates(l)?h=l:l instanceof O.b?h=new ie(e,l):(c=ve.convention(l))?(null===c.elementName||n?u.push(new Fe(a,l,c)):n=new Fe(a,l,c),N.c.define(N.c.resource,c,l)):(c=Qe.convention(a))?(null===c.elementName||n?u.push(new Fe(a,l,c)):n=new Fe(a,l,c),N.c.define(N.c.resource,c,l)):(c=I.w.convention(a)||I.f.convention(a)||U.convention(a))?(u.push(new Fe(a,l,c)),N.c.define(N.c.resource,c,l)):r||(r=l,o=a));return!n&&r&&(n=new Fe(o,r)),d.moduleInstance=t,d.mainResource=n,d.resources=u,d.viewStrategy=h,d},e}(),Ee=_.getLogger("templating");var Re=function(){function e(e){var t=this;e.then(function(e){return t.viewFactory=e})}return e.prototype.create=function(e,t,i,n){return this.viewFactory.create(e,t,i,n)},e.prototype.setCacheSize=function(e,t){this.viewFactory.setCacheSize(e,t)},e.prototype.getCachedView=function(){return this.viewFactory.getCachedView()},e.prototype.returnViewToCache=function(e){this.viewFactory.returnViewToCache(e)},B(e,[{key:"isCaching",get:function(){return this.viewFactory.isCaching}}]),e}(),Pe=null,De=Object(x.e)(O.a,x.a,ke,Te,ve)((C=y=function(){function t(e,t,i,n,r){this.loader=e,this.container=t,this.viewCompiler=i,this.moduleAnalyzer=n,this.appResources=r,this._pluginMap={},null===Pe&&((Pe=new Qe).attributeName="au-slot",N.c.define(N.c.resource,Pe,ue)),Pe.initialize(t,ue),Pe.register(r)}return t.prototype.addResourcePlugin=function(e,t){var i=e.replace(".","")+"-resource-plugin";this._pluginMap[e]=i,this.loader.addPlugin(i,t)},t.prototype.loadViewFactory=function(t,i,n,r){var o=this;return n=n||new K,function(t,i){return i instanceof O.b?e.resolve(i):t.loadTemplate(i)}(this.loader,t).then(function(t){var s=t.address;return t.onReady?n.hasDependency(s)?null===t.template?t.onReady:e.resolve(new Re(t.onReady)):(n.addDependency(s),t.onReady):(n.addDependency(s),t.onReady=o.loadTemplateResources(t,i,n,r).then(function(e){if(t.resources=e,null===t.template)return t.factory=null;var n=o.viewCompiler.compile(t.template,e,i);return t.factory=n}),t.onReady)})},t.prototype.loadTemplateResources=function(i,n,r,o){var s=new ve(this.appResources,i.address),a=i.dependencies,l=void 0,u=void 0;if(n=n||Q.normal,0===a.length&&!n.associatedModuleId)return e.resolve(s);if(l=a.map(function(e){return e.src}),u=a.map(function(e){return e.name}),Ee.debug("importing resources for "+i.address,l),o){var c=N.c.get(t.viewModelRequireMetadataKey,o);if(c){for(var h=l.length,d=0,p=c.length;d<p;++d){var f=c[d],v="function"==typeof f?N.a.get(f).moduleId:Object(j.d)(f.src||f,i.address);-1===l.indexOf(v)&&(l.push(v),u.push(f.as))}Ee.debug("importing ViewModel resources for "+n.associatedModuleId,l.slice(h))}}return this.importViewResources(l,u,s,n,r)},t.prototype.importViewModelResource=function(e,t){var i=this;return this.loader.loadModule(e).then(function(n){var r=N.a.get(n).moduleId,o=i.moduleAnalyzer.analyze(r,n,t);if(!o.mainResource)throw new Error('No view model found in module "'+e+'".');return o.initialize(i.container),o.mainResource})},t.prototype.importViewResources=function(t,i,n,r,o){var s=this;return o=o||new K,r=r||Q.normal,t=t.map(function(e){return s._applyLoaderPlugin(e)}),this.loader.loadAllModules(t).then(function(t){var a=void 0,l=void 0,u=void 0,c=void 0,h=void 0,d=void 0,p=s.container,f=s.moduleAnalyzer,v=new Array(t.length);for(a=0,l=t.length;a<l;++a)h=t[a],c=N.a.get(h).moduleId,(u=f.analyze(c,h)).initialize(p),u.register(n,i[a]),v[a]=u;for(r.associatedModuleId&&(d=f.getAnalysis(r.associatedModuleId))&&d.register(n),a=0,l=v.length;a<l;++a)v[a]=v[a].load(p,o);return e.all(v).then(function(){return n})})},t.prototype._applyLoaderPlugin=function(e){var t=e.lastIndexOf(".");if(-1!==t){var i=e.substring(t),n=this._pluginMap[i];return void 0===n?e:this.loader.applyPluginToUrl(e,n)}return e},t}(),y.viewModelRequireMetadataKey="aurelia:view-model-require",b=C))||b,Le=function(){function e(e,t,i,n){this.behavior=e,this.instruction=t,this.viewModel=i,this.isAttached=!1,this.view=null,this.isBound=!1,this.scope=null,this.container=n,this.elementEvents=n.elementEvents||null;var r,o=e.observerLocator.getOrCreateObserversLookup(i),s=e.handlesBind,a=t.attributes,l=this.boundProperties=[],u=e.properties,c=void 0;for(e._ensurePropertiesDefined(i,o),c=0,r=u.length;c<r;++c)u[c]._initialize(i,o,a,s,l)}return e.prototype.created=function(e){this.behavior.handlesCreated&&this.viewModel.created(e,this.view)},e.prototype.automate=function(e,t){this.view.bindingContext=this.viewModel,this.view.overrideContext=e||Object(I.B)(this.viewModel),this.view._isUserControlled=!0,this.behavior.handlesCreated&&this.viewModel.created(t||null,this.view),this.bind(this.view)},e.prototype.bind=function(e){var t,i=this.behavior.handlesBind,n=this.boundProperties,r=void 0,o=void 0,s=void 0,a=void 0;if(this.isBound){if(this.scope===e)return;this.unbind()}for(this.isBound=!0,this.scope=e,r=0,t=n.length;r<t;++r)a=(s=(o=n[r]).observer).selfSubscriber,s.publishing=!1,i&&(s.selfSubscriber=null),o.binding.bind(e),s.call(),s.publishing=!0,s.selfSubscriber=a;var l=void 0;null!==this.view?(i&&(this.view.viewModelScope=e),this.viewModel===e.overrideContext.bindingContext?l=e.overrideContext:this.instruction.inheritBindingContext?l=Object(I.B)(this.viewModel,e.overrideContext):(l=Object(I.B)(this.viewModel)).__parentOverrideContext=e.overrideContext,this.view.bind(this.viewModel,l)):i&&(l=e.overrideContext,void 0!==e.overrideContext.__parentOverrideContext&&this.viewModel.viewFactory&&this.viewModel.viewFactory.factoryCreateInstruction.partReplacements&&((l=Object.assign({},e.overrideContext)).parentOverrideContext=e.overrideContext.__parentOverrideContext),this.viewModel.bind(e.bindingContext,l))},e.prototype.unbind=function(){if(this.isBound){var e,t=this.boundProperties,i=void 0;for(this.isBound=!1,this.scope=null,null!==this.view&&this.view.unbind(),this.behavior.handlesUnbind&&this.viewModel.unbind(),null!==this.elementEvents&&this.elementEvents.disposeAll(),i=0,e=t.length;i<e;++i)t[i].binding.unbind()}},e.prototype.attached=function(){this.isAttached||(this.isAttached=!0,this.behavior.handlesAttached&&this.viewModel.attached(),null!==this.view&&this.view.attached())},e.prototype.detached=function(){this.isAttached&&(this.isAttached=!1,null!==this.view&&this.view.detached(),this.behavior.handlesDetached&&this.viewModel.detached())},e}(),ze=Object(I.I)()(S=function(){function e(e,t,i,n,r){this.taskQueue=e,this.obj=t,this.propertyName=i,this.notqueued=!0,this.publishing=!1,this.selfSubscriber=n,this.currentValue=this.oldValue=r}return e.prototype.getValue=function(){return this.currentValue},e.prototype.setValue=function(e){var t=this.currentValue;Object.is(e,t)||(this.oldValue=t,this.currentValue=e,this.publishing&&this.notqueued&&(this.taskQueue.flushing?this.call():(this.notqueued=!1,this.taskQueue.queueMicroTask(this))))},e.prototype.call=function(){var e=this.oldValue,t=this.currentValue;this.notqueued=!0,Object.is(t,e)||(this.selfSubscriber&&this.selfSubscriber(t,e),this.callSubscribers(t,e),this.oldValue=t)},e.prototype.subscribe=function(e,t){this.addSubscriber(e,t)},e.prototype.unsubscribe=function(e,t){this.removeSubscriber(e,t)},e}())||S;function He(e,t){var i=e.__observers__;if(void 0===i){var n=Object.getPrototypeOf(e).constructor,r=N.c.get(N.c.resource,n);r.isInitialized||r.initialize(x.a.instance||new x.a,e.constructor),i=r.observerLocator.getOrCreateObserversLookup(e),r._ensurePropertiesDefined(e,i)}return i[t]}var Ue=function(){function e(e){"string"==typeof e?this.name=e:Object.assign(this,e),this.attribute=this.attribute||z(this.name);var t=this.defaultBindingMode;null==t?this.defaultBindingMode=I.y.oneWay:"string"==typeof t&&(this.defaultBindingMode=I.y[t]||I.y.oneWay),this.changeHandler=this.changeHandler||null,this.owner=null,this.descriptor=null}return e.prototype.registerWith=function(e,t,i){if(t.properties.push(this),t.attributes[this.attribute]=this,this.owner=t,i)return this.descriptor=i,this._configureDescriptor(i)},e.prototype._configureDescriptor=function(e){var t=this.name;return e.configurable=!0,e.enumerable=!0,"initializer"in e&&(this.defaultValue=e.initializer,delete e.initializer,delete e.writable),"value"in e&&(this.defaultValue=e.value,delete e.value,delete e.writable),e.get=function(){return He(this,t).getValue()},e.set=function(e){He(this,t).setValue(e)},e.get.getObserver=function(e){return He(e,t)},e},e.prototype.defineOn=function(e,t){var i=this.name,n=void 0;null===this.changeHandler&&(n=i+"Changed")in e.prototype&&(this.changeHandler=n),null===this.descriptor&&Object.defineProperty(e.prototype,i,this._configureDescriptor(t,{}))},e.prototype.createObserver=function(e){var t=null,i=this.defaultValue,n=this.changeHandler,r=this.name,o=void 0;if(!this.hasOptions){if(n in e)t="propertyChanged"in e?function(t,i){e[n](t,i),e.propertyChanged(r,t,i)}:function(t,i){return e[n](t,i)};else if("propertyChanged"in e)t=function(t,i){return e.propertyChanged(r,t,i)};else if(null!==n)throw new Error("Change handler "+n+" was specified but not declared on the class.");return void 0!==i&&(o="function"==typeof i?i.call(e):i),new ze(this.owner.taskQueue,e,this.name,t,o)}},e.prototype._initialize=function(e,t,i,n,r){var o=void 0,s=void 0,a=void 0,l=this.defaultValue;if(this.isDynamic)for(var u in i)this._createDynamicProperty(e,t,n,u,i[u],r);else this.hasOptions||(s=t[this.name],null!==i&&(o=s.selfSubscriber,a=i[this.attribute],n&&(s.selfSubscriber=null),"string"==typeof a?(e[this.name]=a,s.call()):a?r.push({observer:s,binding:a.createBinding(e)}):void 0!==l&&s.call(),s.selfSubscriber=o),s.publishing=!0)},e.prototype._createDynamicProperty=function(e,t,i,n,r,o){var s=n+"Changed",a=null,l=void 0,u=void 0;s in e?a="propertyChanged"in e?function(t,i){e[s](t,i),e.propertyChanged(n,t,i)}:function(t,i){return e[s](t,i)}:"propertyChanged"in e&&(a=function(t,i){return e.propertyChanged(n,t,i)}),l=t[n]=new ze(this.owner.taskQueue,e,n,a),Object.defineProperty(e,n,{configurable:!0,enumerable:!0,get:l.getValue.bind(l),set:l.setValue.bind(l)}),i&&(l.selfSubscriber=null),"string"==typeof r?(e[n]=r,l.call()):r&&(u={observer:l,binding:r.createBinding(e)},o.push(u)),l.publishing=!0,l.selfSubscriber=a},e}(),qe=0;function We(){return!0}function Ke(){}var Qe=function(){function t(){this.elementName=null,this.attributeName=null,this.attributeDefaultBindingMode=void 0,this.liftsContent=!1,this.targetShadowDOM=!1,this.shadowDOMOptions=null,this.processAttributes=Ke,this.processContent=We,this.usesShadowDOM=!1,this.childBindings=null,this.hasDynamicOptions=!1,this.containerless=!1,this.properties=[],this.attributes={},this.isInitialized=!1,this.primaryProperty=null}return t.convention=function(e,i){var n=void 0;return e.endsWith("CustomAttribute")&&((n=i||new t).attributeName=z(e.substring(0,e.length-15))),e.endsWith("CustomElement")&&((n=i||new t).elementName=z(e.substring(0,e.length-13))),n},t.prototype.addChildBinding=function(e){null===this.childBindings&&(this.childBindings=[]),this.childBindings.push(e)},t.prototype.initialize=function(e,t){var i=t.prototype,n=this.properties,r=this.attributeName,o=this.attributeDefaultBindingMode,s=void 0,a=void 0,l=void 0;if(!this.isInitialized)if(this.isInitialized=!0,t.__providerId__=++qe,this.observerLocator=e.get(I.s),this.taskQueue=e.get(k.a),this.target=t,this.usesShadowDOM=this.targetShadowDOM&&M.c.shadowDOM,this.handlesCreated="created"in i,this.handlesBind="bind"in i,this.handlesUnbind="unbind"in i,this.handlesAttached="attached"in i,this.handlesDetached="detached"in i,this.htmlName=this.elementName||this.attributeName,null!==r)if(0===n.length&&new Ue({name:"value",changeHandler:"valueChanged"in i?"valueChanged":null,attribute:r,defaultBindingMode:o}).registerWith(t,this),l=n[0],1===n.length&&"value"===l.name)l.isDynamic=l.hasOptions=this.hasDynamicOptions,l.defineOn(t,this);else{for(s=0,a=n.length;s<a;++s)if(n[s].defineOn(t,this),n[s].primaryProperty){if(this.primaryProperty)throw new Error("Only one bindable property on a custom element can be defined as the default");this.primaryProperty=n[s]}(l=new Ue({name:"value",changeHandler:"valueChanged"in i?"valueChanged":null,attribute:r,defaultBindingMode:o})).hasOptions=!0,l.registerWith(t,this)}else{for(s=0,a=n.length;s<a;++s)n[s].defineOn(t,this);this._copyInheritedProperties(e,t)}},t.prototype.register=function(e,t){var i=this;null!==this.attributeName&&(e.registerAttribute(t||this.attributeName,this,this.attributeName),Array.isArray(this.aliases)&&this.aliases.forEach(function(t){e.registerAttribute(t,i,i.attributeName)})),null!==this.elementName&&e.registerElement(t||this.elementName,this)},t.prototype.load=function(t,i,n,r,o){var s=this,a=void 0;return null!==this.elementName?(r=t.get(oe).getViewStrategy(r||this.viewStrategy||i),a=new Q(this.targetShadowDOM,!0),r.moduleId||(r.moduleId=N.a.get(i).moduleId),r.loadViewFactory(t.get(De),a,n,i).then(function(e){return o&&s.viewFactory||(s.viewFactory=e),e})):e.resolve(this)},t.prototype.compile=function(e,t,i,n,r){if(this.liftsContent){if(!n.viewFactory){var o=M.b.createElement("template"),s=M.b.createDocumentFragment(),a=i.getAttribute("view-cache"),l=i.getAttribute("part");i.removeAttribute(n.originalAttrName),M.b.replaceNode(o,i,r),s.appendChild(i),n.viewFactory=e.compile(s,t),l&&(n.viewFactory.part=l,i.removeAttribute("part")),a&&(n.viewFactory.setCacheSize(a),i.removeAttribute("view-cache")),i=o}}else if(null!==this.elementName){var u={};if(this.processContent(e,t,i,n)&&i.hasChildNodes()){for(var c=i.firstChild,h=this.usesShadowDOM?null:M.b.createElement("au-content"),d=void 0,p=void 0;c;)d=c.nextSibling,"TEMPLATE"===c.tagName&&(p=c.getAttribute("replace-part"))?(u[p]=e.compile(c,t),M.b.removeNode(c,r),n.partReplacements=u):null!==h&&(3===c.nodeType&&H(c)?M.b.removeNode(c,r):h.appendChild(c)),c=d;null!==h&&h.hasChildNodes()&&i.appendChild(h),n.skipContentProcessing=!1}else n.skipContentProcessing=!0}else this.processContent(e,t,i,n)||(n.skipContentProcessing=!0);return i},t.prototype.create=function(e,t,i,n){var r=void 0,o=null;t=t||$.normal,i=i||null,n=n||null,null!==this.elementName&&i&&(this.usesShadowDOM?(r=i.attachShadow(this.shadowDOMOptions),e.registerInstance(M.b.boundary,r)):(r=i,this.targetShadowDOM&&e.registerInstance(M.b.boundary,r))),null!==i&&(i.au=o=i.au||{});var s=t.viewModel||e.get(this.target),a=new Le(this,t,s,e),l=this.childBindings,u=void 0;if(this.liftsContent)o.controller=a;else if(null!==this.elementName){if(u=t.viewFactory||this.viewFactory,e.viewModel=s,u&&(a.view=u.create(e,t,i)),null!==i){if(o.controller=a,a.view){if(!this.usesShadowDOM&&(1===i.childNodes.length||i.contentElement)){var c=i.childNodes[0]||i.contentElement;a.view.contentView={fragment:c},c.parentNode&&M.b.removeNode(c)}if(t.anchorIsContainer){if(null!==l)for(var h=0,d=l.length;h<d;++h)a.view.addBinding(l[h].create(i,s,a));a.view.appendNodesTo(r)}else a.view.insertNodesBefore(r)}else if(null!==l)for(var p=0,f=l.length;p<f;++p)n.push(l[p].create(i,s,a))}else if(a.view){if(a.view.controller=a,null!==l)for(var v=0,m=l.length;v<m;++v)a.view.addBinding(l[v].create(t.host,s,a))}else if(null!==l)for(var g=0,w=l.length;g<w;++g)n.push(l[g].create(t.host,s,a))}else if(null!==l)for(var b=0,y=l.length;b<y;++b)n.push(l[b].create(i,s,a));return null!==o&&(o[this.htmlName]=a),t.initiatedByBehavior&&u&&a.view.created(),a},t.prototype._ensurePropertiesDefined=function(e,t){var i,n=void 0,r=void 0,o=void 0;if(!("__propertiesDefined__"in t))for(t.__propertiesDefined__=!0,r=0,i=(n=this.properties).length;r<i;++r)void 0!==(o=n[r].createObserver(e))&&(t[o.propertyName]=o)},t.prototype._copyInheritedProperties=function(e,t){for(var i=this,n=void 0,r=t;;){var o=Object.getPrototypeOf(t.prototype);if(!(t=o&&o.constructor))return;if(n=N.c.getOwn(N.c.resource,t))break}n.initialize(e,t);for(var s=function(e,t){var o=n.properties[e];if(i.properties.some(function(e){return e.name===o.name}))return"continue";new Ue(o).registerWith(r,i)},a=0,l=n.properties.length;a<l;++a)s(a)},t}();function $e(e,t){return function(i,n,r){var o="string"==typeof n?i.constructor:i,s=N.c.getOrCreateOwn(N.c.resource,Qe,o);"string"==typeof e&&(e={selector:e,name:n}),r&&(r.writable=!0,r.configurable=!0),e.all=t,s.addChildBinding(new Xe(e))}}function Ge(e){return $e(e,!0)}var Xe=function(){function e(e){this.name=e.name,this.changeHandler=e.changeHandler||this.name+"Changed",this.selector=e.selector,this.all=e.all}return e.prototype.create=function(e,t,i){return new et(this.selector,e,this.name,t,i,this.changeHandler,this.all)},e}(),Ye=[];function Ze(e,t,i){var n=e.get(t);n||(n=[],e.set(t,n)),n.push(i)}function Je(e,t){for(var i=t.binders,n=i.length,r=new Map,o=0,s=e.length;o<s;++o){for(var a=e[o],l=a.addedNodes,u=a.removedNodes,c=0,h=u.length;c<h;++c){var d=u[c];if(1===d.nodeType)for(var p=0;p<n;++p){var f=i[p];f.onRemove(d)&&Ze(r,f,a)}}for(var v=0,m=l.length;v<m;++v){var g=l[v];if(1===g.nodeType)for(var w=0;w<n;++w){var b=i[w];b.onAdd(g)&&Ze(r,b,a)}}}r.forEach(function(e,t){null!==t.changeHandler&&t.viewModel[t.changeHandler](e)})}var et=function(){function e(e,t,i,n,r,o,s){this.selector=e,this.viewHost=t,this.property=i,this.viewModel=n,this.controller=r,this.changeHandler=o in n?o:null,this.usesShadowDOM=r.behavior.usesShadowDOM,this.all=s,!this.usesShadowDOM&&r.view&&r.view.contentView?this.contentView=r.view.contentView:this.contentView=null}return e.prototype.matches=function(e){if(e.matches(this.selector)){if(null===this.contentView)return!0;var t=this.contentView,i=e.auAssignedSlot;if(i&&i.projectFromAnchors){for(var n=i.projectFromAnchors,r=0,o=n.length;r<o;++r)if(n[r].auOwnerView===t)return!0;return!1}return e.auOwnerView===t}return!1},e.prototype.bind=function(e){var t=this.viewHost,i=this.viewModel,n=t.__childObserver__;if(!n){n=t.__childObserver__=M.b.createMutationObserver(Je);var r={childList:!0,subtree:!this.usesShadowDOM};n.observe(t,r),n.binders=[]}if(n.binders.push(this),this.usesShadowDOM){var o=t.firstElementChild;if(this.all){var s=i[this.property];for(s?s.splice(0):s=i[this.property]=[];o;)this.matches(o)&&s.push(o.au&&o.au.controller?o.au.controller.viewModel:o),o=o.nextElementSibling;null!==this.changeHandler&&this.viewModel[this.changeHandler](Ye)}else for(;o;){if(this.matches(o)){var a=o.au&&o.au.controller?o.au.controller.viewModel:o;this.viewModel[this.property]=a,null!==this.changeHandler&&this.viewModel[this.changeHandler](a);break}o=o.nextElementSibling}}},e.prototype.onRemove=function(e){if(this.matches(e)){var t=e.au&&e.au.controller?e.au.controller.viewModel:e;if(this.all){var i=this.viewModel[this.property]||(this.viewModel[this.property]=[]),n=i.indexOf(t);return-1!==n&&i.splice(n,1),!0}return!1}return!1},e.prototype.onAdd=function(e){if(this.matches(e)){var t=e.au&&e.au.controller?e.au.controller.viewModel:e;if(this.all){var i=this.viewModel[this.property]||(this.viewModel[this.property]=[]);if("*"===this.selector)return i.push(t),!0;for(var n=0,r=e.previousElementSibling;r;)this.matches(r)&&n++,r=r.previousElementSibling;return i.splice(n,0,t),!0}this.viewModel[this.property]=t,null!==this.changeHandler&&this.viewModel[this.changeHandler](t)}return!1},e.prototype.unbind=function(){this.viewHost.__childObserver__&&(this.viewHost.__childObserver__.disconnect(),this.viewHost.__childObserver__=null,this.viewModel[this.property]=null)},e}();function tt(e,t){return Array.isArray(t)?e.removeMany(t,!0):e.remove(t,!0)}var it={before:function(e,t,i){return void 0===t?i():i().then(function(){return tt(e,t)})},with:function(t,i,n){return void 0===i?n():e.all([tt(t,i),n()])},after:function(t,i,n){return e.resolve(t.removeAll(!0)).then(n)}};function nt(t){return t.skipActivation||"function"!=typeof t.viewModel.activate?e.resolve():t.viewModel.activate(t.model)||e.resolve()}var rt=Object(x.e)(De,oe)(V=function(){function t(e,t){this.viewEngine=e,this.viewLocator=t}return t.prototype._swap=function(t,i){var n=it[t.swapOrder]||it.after,r=t.viewSlot.children.slice();return n(t.viewSlot,r,function(){return e.resolve(t.viewSlot.add(i)).then(function(){t.currentController&&t.currentController.unbind()})}).then(function(){t.compositionTransactionNotifier&&t.compositionTransactionNotifier.done()})},t.prototype._createControllerAndSwap=function(e){var t=this;return this.createController(e).then(function(i){return e.compositionTransactionOwnershipToken?e.compositionTransactionOwnershipToken.waitForCompositionComplete().then(function(){return i.automate(e.overrideContext,e.owningView),t._swap(e,i.view)}).then(function(){return i}):(i.automate(e.overrideContext,e.owningView),t._swap(e,i.view).then(function(){return i}))})},t.prototype.createController=function(e){var t=this,i=void 0,n=void 0,r=void 0,o=void 0;return this.ensureViewModel(e).then(nt).then(function(){i=e.childContainer,n=e.viewModel,r=e.viewModelResource,o=r.metadata;var s=t.viewLocator.getViewStrategy(e.view||n);return e.viewResources&&s.makeRelativeTo(e.viewResources.viewUrl),o.load(i,r.value,null,s,!0)}).then(function(t){return o.create(i,$.dynamic(e.host,n,t))})},t.prototype.ensureViewModel=function(t){var i=t.childContainer=t.childContainer||t.container.createChild();if("string"==typeof t.viewModel)return t.viewModel=t.viewResources?t.viewResources.relativeToView(t.viewModel):t.viewModel,this.viewEngine.importViewModelResource(t.viewModel).then(function(e){return i.autoRegister(e.value),t.host&&i.registerInstance(M.b.Element,t.host),t.viewModel=i.viewModel=i.get(e.value),t.viewModelResource=e,t});var n=t.viewModel.constructor,r="function"==typeof t.viewModel;r&&(n=t.viewModel,i.autoRegister(n));var o=N.c.getOrCreateOwn(N.c.resource,Qe,n);return o.elementName=o.elementName||"dynamic-element",o.initialize(r?i:t.container||i,n),t.viewModelResource={metadata:o,value:n},t.host&&i.registerInstance(M.b.Element,t.host),i.viewModel=t.viewModel=r?i.get(n):t.viewModel,e.resolve(t)},t.prototype.compose=function(t){var i=this;t.childContainer=t.childContainer||t.container.createChild(),t.view=this.viewLocator.getViewStrategy(t.view);var n=t.childContainer.get(P),r=n.tryCapture();return r?t.compositionTransactionOwnershipToken=r:t.compositionTransactionNotifier=n.enlist(),t.viewModel?this._createControllerAndSwap(t):t.view?(t.viewResources&&t.view.makeRelativeTo(t.viewResources.viewUrl),t.view.loadViewFactory(this.viewEngine,new Q).then(function(e){var n=e.create(t.childContainer);return n.bind(t.bindingContext,t.overrideContext),t.compositionTransactionOwnershipToken?t.compositionTransactionOwnershipToken.waitForCompositionComplete().then(function(){return i._swap(t,n)}).then(function(){return n}):i._swap(t,n).then(function(){return n})})):t.viewSlot?(t.viewSlot.removeAll(),t.compositionTransactionNotifier&&t.compositionTransactionNotifier.done(),e.resolve(null)):e.resolve(null)},t}())||V;!function(){function e(){}e.prototype.initialize=function(e,t){},e.prototype.register=function(e,t){},e.prototype.load=function(e,t){var i=new t;e.get(I.m).registerElementConfig(i)}}();function ot(e){return function(t){"string"==typeof e||Object.getPrototypeOf(e)===Object.prototype?t.$resource=e:N.c.define(N.c.resource,e,t)}}function st(e){return function(t){N.c.getOrCreateOwn(N.c.resource,Qe,t).elementName=fe(e,"custom element")}}function at(e,t,i){return function(n){var r=N.c.getOrCreateOwn(N.c.resource,Qe,n);r.attributeName=fe(e,"custom attribute"),r.attributeDefaultBindingMode=t,r.aliases=i}}function lt(e){var t=function(e){N.c.getOrCreateOwn(N.c.resource,Qe,e).liftsContent=!0};return e?t(e):t}function ut(e,t,i){var n=function(t,i,n){var r=i?t.constructor:t,o=N.c.getOrCreateOwn(N.c.resource,Qe,r);return i&&((e=e||{}).name=i),new Ue(e).registerWith(r,o,n)};if(!e)return n;if(t){var r=e;return e=null,n(r,t,i)}return n}var ct={mode:"open"};function ht(e){var t="function"!=typeof e&&e?e:ct,i=function(e){var i=N.c.getOrCreateOwn(N.c.resource,Qe,e);i.targetShadowDOM=!0,i.shadowDOMOptions=t};return"function"==typeof e?i(e):i}function dt(e){return function(t){N.c.define(oe.viewStrategyMetadataKey,e,t)}}function pt(e){return dt(new J(e))}function ft(e,t,i){return dt(new ne(e,t,i))}function vt(e,t){var i=void 0,n=void 0;"function"==typeof e?i=e:(n=e,i=void 0);var r=function(e){N.c.define(oe.viewStrategyMetadataKey,new te(n,t),e)};return i?r(i):r}var mt=Object(x.e)(x.a,Te,ke,rt)(A=function(){function e(e,t,i,n){this._container=e,this._moduleAnalyzer=t,this._viewCompiler=i,this._compositionEngine=n,e.registerInstance(T,T.instance=new T)}return e.prototype.configureAnimator=function(e){this._container.unregister(T),this._container.registerInstance(T,T.instance=e)},e.prototype.compose=function(e){return this._compositionEngine.compose(e)},e.prototype.enhance=function(e){e instanceof M.b.Element&&(e={element:e});var t={letExpressions:[]},i=e.resources||this._container.get(ve);this._viewCompiler._compileNode(e.element,i,t,e.element.parentNode,"root",!0);var n=new Me(e.element,t,i),r=e.container||this._container.createChild(),o=n.create(r,$.enhance());return o.bind(e.bindingContext||{},e.overrideContext),o.firstChild=o.lastChild=o.fragment,o.fragment=M.b.createDocumentFragment(),o.attached(),o},e}())||A}).call(this,i("B/eG").default)}}]);
//# sourceMappingURL=vendor.aurelia-templating~9e0f4621.25e9cab4ab640c17e8ff.bundle.map